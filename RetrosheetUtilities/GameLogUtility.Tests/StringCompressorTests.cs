using FluentAssertions;
using Retrosheet.Utilities.GameLogUtility;
using Xunit;

namespace GameLogUtility.Tests
{
    public class StringCompressorTests
    {
        public StringCompressorTests()
        {
            _stringCompressor = new StringCompressor();
        }

        private const string TestJson = "{\"game_date\":\"20170402\",\"game_number\":\"0\",\"day_of_week\":\"Sun\",\"visiting_team\":\"SFN\",\"visiting_team_league\":\"NL\",\"visiting_team_game_number\":\"1\",\"home_team\":\"ARI\",\"home_team_league\":\"NL\",\"home_team_game_number\":\"1\",\"visting_team_score\":\"5\",\"home_team_score\":\"6\",\"game_length_outs\":\"53\",\"day_night\":\"D\",\"completion_info\":\"\",\"forfeit_info\":\"\",\"protest_info\":\"\",\"park_id\":\"PHO01\",\"attendance\":\"49016\",\"game_length_minutes\":\"203\",\"visting_team_linescore\":\"010011101\",\"home_team_linescore\":\"000003012\",\"visiting_team_off_ab\":\"34\",\"visiting_team_off_hits\":\"11\",\"visiting_team_off_2b\":\"2\",\"visiting_team_off_3b\":\"1\",\"visiting_team_off_hr\":\"2\",\"visiting_team_off_rbi\":\"5\",\"visiting_team_off_sac_hits\":\"0\",\"visiting_team_off_sac_flies\":\"2\",\"visiting_team_off_hbp\":\"0\",\"visiting_team_off_bb\":\"5\",\"visiting_team_off_ibb\":\"0\",\"visiting_team_off_k\":\"7\",\"visiting_team_off_sb\":\"2\",\"visiting_team_off_cs\":\"1\",\"visiting_team_off_dp\":\"0\",\"visiting_team_off_catcher_int\":\"0\",\"visiting_team_off_lob\":\"9\",\"visiting_team_pitch_pitchers_used\":\"5\",\"visiting_team_pitch_ind_er\":\"6\",\"visiting_team_pitch_team_er\":\"6\",\"visiting_team_pitch_wp\":\"0\",\"visiting_team_pitch_balks\":\"0\",\"visiting_team_def_po\":\"26\",\"visiting_team_def_assists\":\"9\",\"visiting_team_def_errors\":\"0\",\"visiting_team_def_pb\":\"0\",\"visiting_team_def_dp\":\"1\",\"visiting_team_def_tp\":\"0\",\"home_team_off_ab\":\"38\",\"home_team_off_hits\":\"13\",\"home_team_off_2b\":\"1\",\"home_team_off_3b\":\"1\",\"home_team_off_hr\":\"1\",\"home_team_off_rbi\":\"6\",\"home_team_off_sac_hits\":\"0\",\"home_team_off_sac_flies\":\"0\",\"home_team_off_hbp\":\"0\",\"home_team_off_bb\":\"0\",\"home_team_off_ibb\":\"0\",\"home_team_off_k\":\"12\",\"home_team_off_sb\":\"0\",\"home_team_off_cs\":\"0\",\"home_team_off_dp\":\"1\",\"home_team_off_catcher_int\":\"0\",\"home_team_off_lob\":\"6\",\"home_team_pitch_pitchers_used\":\"6\",\"home_team_pitch_ind_er\":\"5\",\"home_team_pitch_team_er\":\"5\",\"home_team_pitch_wp\":\"2\",\"home_team_pitch_balks\":\"0\",\"home_team_def_po\":\"27\",\"home_team_def_assists\":\"8\",\"home_team_def_errors\":\"0\",\"home_team_def_pb\":\"0\",\"home_team_def_dp\":\"0\",\"home_team_def_tp\":\"0\",\"hp_ump_id\":\"gibsg901\",\"hp_ump_n\":\"Greg Gibson\",\"1b_ump_id\":\"timmt901\",\"1b_ump_n\":\"Tim Timmons\",\"2b_ump_id\":\"wolfj901\",\"2b_ump_n\":\"Jim Wolf\",\"3b_ump_id\":\"reybd901\",\"3b_ump_n\":\"D.J. Reyburn\",\"lf_ump_id\":\"\",\"lf_ump_n\":\"(none)\",\"rf_ump_id\":\"\",\"rf_ump_n\":\"(none)\",\"visiting_team_mgr_id\":\"bochb002\",\"visiting_team_mgr_n\":\"Bruce Bochy\",\"home_team_mgr_id\":\"lovut001\",\"home_team_mgr_n\":\"Tony Lovullo\",\"winning_pitcher_id\":\"rodnf001\",\"winning_pitcher_n\":\"Fernando Rodney\",\"losing_pitcher_id\":\"melam001\",\"losing_pitcher_n\":\"Mark Melancon\",\"saving_pitcher_id\":\"\",\"saving_pitcher_n\":\"(none)\",\"game_winning_rbi_id\":\"owinc001\",\"game_winning_rbi_n\":\"Chris Owings\",\"visiting_team_starting_pitcher_id\":\"bumgm001\",\"visiting_team_starting_pitcher_n\":\"Madison Bumgarner\",\"home_team_starting_pitcher_id\":\"greiz001\",\"home_team_starting_pitcher_n\":\"Zack Greinke\",\"visiting_team_starter_01_id\":\"spand001\",\"visiting_team_starter_01_n\":\"Denard Span\",\"visiting_team_starter_01_pos\":\"8\",\"visiting_team_starter_02_id\":\"beltb001\",\"visiting_team_starter_02_n\":\"Brandon Belt\",\"visiting_team_starter_02_pos\":\"3\",\"visiting_team_starter_03_id\":\"pench001\",\"visiting_team_starter_03_n\":\"Hunter Pence\",\"visiting_team_starter_03_pos\":\"9\",\"visiting_team_starter_04_id\":\"poseb001\",\"visiting_team_starter_04_n\":\"Buster Posey\",\"visiting_team_starter_04_pos\":\"2\",\"visiting_team_starter_05_id\":\"crawb001\",\"visiting_team_starter_05_n\":\"Brandon Crawford\",\"visiting_team_starter_05_pos\":\"6\",\"visiting_team_starter_06_id\":\"nunee002\",\"visiting_team_starter_06_n\":\"Eduardo Nunez\",\"visiting_team_starter_06_pos\":\"5\",\"visiting_team_starter_07_id\":\"parkj002\",\"visiting_team_starter_07_n\":\"Jarrett Parker\",\"visiting_team_starter_07_pos\":\"7\",\"visiting_team_starter_08_id\":\"panij002\",\"visiting_team_starter_08_n\":\"Joe Panik\",\"visiting_team_starter_08_pos\":\"4\",\"visiting_team_starter_09_id\":\"bumgm001\",\"visiting_team_starter_09_n\":\"Madison Bumgarner\",\"visiting_team_starter_09_pos\":\"1\",\"home_team_starter_01_id\":\"polla001\",\"home_team_starter_01_n\":\"A.J. Pollock\",\"home_team_starter_01_pos\":\"8\",\"home_team_starter_02_id\":\"owinc001\",\"home_team_starter_02_n\":\"Chris Owings\",\"home_team_starter_02_pos\":\"6\",\"home_team_starter_03_id\":\"goldp001\",\"home_team_starter_03_n\":\"Paul Goldschmidt\",\"home_team_starter_03_pos\":\"3\",\"home_team_starter_04_id\":\"lambj001\",\"home_team_starter_04_n\":\"Jake Lamb\",\"home_team_starter_04_pos\":\"5\",\"home_team_starter_05_id\":\"tomay001\",\"home_team_starter_05_n\":\"Yasmany Tomas\",\"home_team_starter_05_pos\":\"7\",\"home_team_starter_06_id\":\"drurb001\",\"home_team_starter_06_n\":\"Brandon Drury\",\"home_team_starter_06_pos\":\"4\",\"home_team_starter_07_id\":\"perad001\",\"home_team_starter_07_n\":\"David Peralta\",\"home_team_starter_07_pos\":\"9\",\"home_team_starter_08_id\":\"mathj001\",\"home_team_starter_08_n\":\"Jeff Mathis\",\"home_team_starter_08_pos\":\"2\",\"home_team_starter_09_id\":\"greiz001\",\"home_team_starter_09_n\":\"Zack Greinke\",\"home_team_starter_09_pos\":\"1\",\"additional_info\":\"\",\"acquisition_info\":\"Y\",\"game_year\":2017,\"game_month\":4,\"game_day\":2}";

        private readonly StringCompressor _stringCompressor;

        [Fact]
        public void Decompress_WhenGivenCompressedString_ReturnsOriginalUncompressedString()
        {
            // Act
            var compressedJson = _stringCompressor.Compress(TestJson);
            var decompressedJson = _stringCompressor.Decompress(compressedJson);

            // Assert
            decompressedJson.Should().Be(TestJson);
        }
    }
}